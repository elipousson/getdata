<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
Get data from an Airtable base using the Airtable API, a development version
of the rairtable package,
and the httr2 package. If the base includes coordinate fields/columns,
optionally convert the data to a simple feature object using
sfext::df_to_sf() if geometry = TRUE."><title>Get data from an Airtable base and optionally convert to a sf object — get_airtable_data • getdata</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get data from an Airtable base and optionally convert to a sf object — get_airtable_data"><meta property="og:description" content="
Get data from an Airtable base using the Airtable API, a development version
of the rairtable package,
and the httr2 package. If the base includes coordinate fields/columns,
optionally convert the data to a simple feature object using
sfext::df_to_sf() if geometry = TRUE."><meta property="og:image" content="https://elipousson.github.io/getdata/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">getdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9002</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/elipousson/getdata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get data from an Airtable base and optionally convert to a sf object</h1>
      <small class="dont-index">Source: <a href="https://github.com/elipousson/getdata/blob/HEAD/R/get_airtable_data.R" class="external-link"><code>R/get_airtable_data.R</code></a></small>
      <div class="d-none name"><code>get_airtable_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
Get data from an Airtable base using the Airtable API, a development version
of the <a href="https://github.com/elipousson/rairtable/tree/dev" class="external-link">rairtable package</a>,
and the httr2 package. If the base includes coordinate fields/columns,
optionally convert the data to a simple feature object using
<code><a href="https://elipousson.github.io/sfext/reference/sf_to_df.html" class="external-link">sfext::df_to_sf()</a></code> if <code>geometry = TRUE</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_airtable_data</span><span class="op">(</span></span>
<span>  <span class="va">base</span>,</span>
<span>  table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  view <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  record <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  fields <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  desc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  max_records <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  per_page <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cell_format <span class="op">=</span> <span class="st">"json"</span>,</span>
<span>  tz <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  locale <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fields_by_id <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  offset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geometry <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  location <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"getdata.dist"</span><span class="op">)</span>,</span>
<span>  diag_ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"getdata.diag_ratio"</span><span class="op">)</span>,</span>
<span>  unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"getdata.unit"</span>, <span class="st">"meter"</span><span class="op">)</span>,</span>
<span>  asp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"getdata.asp"</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"getdata.crs"</span>, <span class="fl">3857</span><span class="op">)</span>,</span>
<span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"getdata.coords"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lon"</span>, <span class="st">"lat"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  from_crs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"getdata.from_crs"</span>, <span class="fl">4326</span><span class="op">)</span>,</span>
<span>  remove_coords <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  address <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"getdata.address"</span>, <span class="st">"address"</span><span class="op">)</span>,</span>
<span>  geo <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  name_repair <span class="op">=</span> <span class="fu">janitor</span><span class="fu">::</span><span class="va"><a href="https://sfirke.github.io/janitor/reference/make_clean_names.html" class="external-link">make_clean_names</a></span>,</span>
<span>  token <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"AIRTABLE_TOKEN"</span>,</span>
<span>  resp_type <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_airtable_metadata</span><span class="op">(</span></span>
<span>  <span class="va">base</span>,</span>
<span>  table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  token <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"AIRTABLE_TOKEN"</span>,</span>
<span>  resp_type <span class="op">=</span> <span class="st">"tables"</span>,</span>
<span>  fields <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>base</dt>
<dd><p>Airtable base id starting with with "app". Optional if url or
airtable are supplied. If base is an Airtable url, the table and view are
replaced based on the values parsed from the url. Required.</p></dd>


<dt>table</dt>
<dd><p>Airtable table id or name. If table is a table ID it is a string
starting with "viw". Optional only if base is a url.</p></dd>


<dt>view</dt>
<dd><p>Airtable view ID, Default: <code>NULL</code></p></dd>


<dt>record</dt>
<dd><p>Airtable record identifier, Default: <code>NULL</code> Superseded by
<code><a href="https://rdrr.io/pkg/rairtable/man/read_airtable.html" class="external-link">rairtable::read_airtable_record()</a></code> function.</p></dd>


<dt>fields</dt>
<dd><p>For <code>get_airtable_metadata()</code>, if <code>TRUE</code>, return the fields
column from the data.frame with the Airtable response. If only one table is
provided, fields are returned as a data frame. Ignored if table is <code>NULL</code></p></dd>


<dt>filter</dt>
<dd><p>Placeholder for filterByFormula API parameter allowing use of
SQL style queries to filter data. Not yet implemented.</p></dd>


<dt>sort</dt>
<dd><p>Field to sort by, Default: <code>NULL</code></p></dd>


<dt>desc</dt>
<dd><p>If <code>TRUE</code>, sort in descending order, Default: <code>FALSE</code></p></dd>


<dt>max_records</dt>
<dd><p>Maximum number of records to return, Default: <code>NULL</code>. Must
be 100 or less.</p></dd>


<dt>per_page</dt>
<dd><p>Passed to page_size parameter of
<code><a href="https://rdrr.io/pkg/rairtable/man/read_airtable.html" class="external-link">rairtable::read_airtable_records()</a></code></p></dd>


<dt>cell_format</dt>
<dd><p>Cell format for "Link to another record" fields (either
"json" (unique ID) or "string" (displayed character string)), Default:
"json"</p></dd>


<dt>tz, locale</dt>
<dd><p>Time zone and locale, Defaults: <code>NULL</code></p></dd>


<dt>fields_by_id</dt>
<dd><p>If <code>TRUE</code>, return fields by id, Default: <code>FALSE</code></p></dd>


<dt>offset</dt>
<dd><p>Offset parameter, Default: <code>NULL</code></p></dd>


<dt>geometry</dt>
<dd><p>If <code>TRUE</code>, convert data into a simple feature object.
Defaults to <code>FALSE</code>.</p></dd>


<dt>location</dt>
<dd><p>sf object. If multiple areas are provided, they are unioned
into a single sf object using <code><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">sf::st_union()</a></code></p></dd>


<dt>dist</dt>
<dd><p>buffer distance in units. Optional.</p></dd>


<dt>diag_ratio</dt>
<dd><p>ratio of diagonal distance of area's bounding box used as
buffer distance. e.g. if the diagonal distance is 3000 meters and the
"diag_ratio = 0.1"  a 300 meter will be used. Ignored when <code>dist</code> is
provided.</p></dd>


<dt>unit</dt>
<dd><p>Units for buffer. Supported options include "meter", "foot",
"kilometer", and "mile", "nautical mile" Common abbreviations (e.g. "km"
instead of "kilometer") are also supported. Distance in units is converted
to units matching GDAL units for x; defaults to "meter"</p></dd>


<dt>asp</dt>
<dd><p>Aspect ratio of width to height as a numeric value (e.g. 0.33) or
character (e.g. "1:3"). If numeric, <code><a href="https://elipousson.github.io/sfext/reference/get_asp.html" class="external-link">get_asp()</a></code> returns the same value
without modification.</p></dd>


<dt>crs</dt>
<dd><p>Cordinate reference system to return, Default: 4326 for
<code><a href="https://elipousson.github.io/sfext/reference/sf_to_df.html" class="external-link">sf_to_df()</a></code> and <code>NULL</code> for <code><a href="https://elipousson.github.io/sfext/reference/sf_to_df.html" class="external-link">df_to_sf()</a></code>.</p></dd>


<dt>coords</dt>
<dd><p>Coordinate columns for input data.frame or output sf object (if
geometry is 'centroid' or 'point') Default: c("lon", "lat").</p></dd>


<dt>from_crs</dt>
<dd><p>For <code><a href="https://elipousson.github.io/sfext/reference/sf_to_df.html" class="external-link">df_to_sf()</a></code>, coordinate reference system used by
coordinates or well known text in data frame.</p></dd>


<dt>remove_coords</dt>
<dd><p>For <code><a href="https://elipousson.github.io/sfext/reference/sf_to_df.html" class="external-link">df_to_sf()</a></code>, if <code>TRUE</code>, remove the coordinate columns
after converting a data frame to simple feature object; defaults to
<code>FALSE</code>.</p></dd>


<dt>address</dt>
<dd><p>Address column name passed to <code><a href="https://jessecambon.github.io/tidygeocoder/reference/geocode.html" class="external-link">tidygeocoder::geocode()</a></code> or
<a href="https://jessecambon.github.io/tidygeocoder/reference/geo.html" class="external-link">tidygeocoder::geo</a></p></dd>


<dt>geo</dt>
<dd><p>If <code>TRUE</code>, use <code><a href="https://elipousson.github.io/sfext/reference/address_to_sf.html" class="external-link">address_to_sf()</a></code> to geocode address column; defaults
to <code>FALSE</code>.</p></dd>


<dt>name_repair</dt>
<dd><p>Defaults to "check_unique"</p></dd>


<dt>token, type</dt>
<dd><p>API token and type, token defaults to <code>NULL</code> and type to
<code>"AIRTABLE_TOKEN"</code> (same as <code>get_access_token(type = "AIRTABLE_TOKEN")</code>).</p></dd>


<dt>resp_type</dt>
<dd><p>Response type to return, Reprecated. Previously, set resp_type
to "resp" to return the API response without any additional formatting or
conversion.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="https://rdrr.io/pkg/rairtable/man/read_airtable.html" class="external-link">rairtable::read_airtable_records</a></code></p><dl><dt><code>airtable</code></dt>
<dd><p>An <code>airtable</code> class object. Optional for <code><a href="https://rdrr.io/pkg/rairtable/man/read_airtable.html" class="external-link">read_airtable()</a></code> if
url is supplied. For <code>read_airtable_records()</code> and
<code>read_airtable_record()</code>, support the airtable, url, or a base <em>and</em> table
parameter.</p></dd>

    <dt><code>page_size</code></dt>
<dd><p>Max records to return per page, Default: <code>NULL</code></p></dd>

    <dt><code>tz,locale</code></dt>
<dd><p>Time zone and locale, Defaults: <code>NULL</code></p></dd>

  
</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function an Airtable personal access token which you can create at
<a href="https://airtable.com/create/tokens" class="external-link">https://airtable.com/create/tokens</a> and save to your local environment with
<code>set_access_token(token = &lt;YOUR_PERSONAL_ACCESS_TOKEN&gt;, type = "AIRTABLE_TOKEN")</code>. The function previously required an Airtable API key
which you can set using <code>set_access_token(token = &lt;YOUR_API_KEY&gt;, type = "AIRTABLE_API_KEY")</code>. However, Airtable is in the process of deprecating user
API keys.</p>
<p><code>get_airtable_data()</code> requires a scope that includes <code>data.records:read</code> and
<code>get_airtable_metadata()</code> a scope including <code>schema.bases:read</code>.</p>
<p>As of May 2023, this function depends on the dev branch of my fork of the
rairtable package. I expect this dependency to switch back to the rairtable
package when the fork is merged.</p>
<p>Learn more about the Airtable API
<a href="https://airtable.com/developers/web/api/introduction" class="external-link">https://airtable.com/developers/web/api/introduction</a></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Eli Pousson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

