<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='get_socrata_data is get_open_data with source_type set to "socrata" (the only
currently supported option). get_open_data can return a selected dataset
using Socrata Query Language (SoQL) parameters as a tibble or sf object.
Details on SoQL queries are found in the Socrata API documentation
https://dev.socrata.com/docs/queries/.'><title>Get data from an open data portal (Socrata) for a location — get_open_data • getdata</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get data from an open data portal (Socrata) for a location — get_open_data"><meta property="og:description" content='get_socrata_data is get_open_data with source_type set to "socrata" (the only
currently supported option). get_open_data can return a selected dataset
using Socrata Query Language (SoQL) parameters as a tibble or sf object.
Details on SoQL queries are found in the Socrata API documentation
https://dev.socrata.com/docs/queries/.'><meta property="og:image" content="https://elipousson.github.io/getdata/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">getdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/elipousson/getdata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get data from an open data portal (Socrata) for a location</h1>
      <small class="dont-index">Source: <a href="https://github.com/elipousson/getdata/blob/HEAD/R/get_open_data.R" class="external-link"><code>R/get_open_data.R</code></a></small>
      <div class="d-none name"><code>get_open_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>get_socrata_data is get_open_data with source_type set to "socrata" (the only
currently supported option). get_open_data can return a selected dataset
using Socrata Query Language (SoQL) parameters as a tibble or sf object.
Details on SoQL queries are found in the Socrata API documentation
<a href="https://dev.socrata.com/docs/queries/" class="external-link">https://dev.socrata.com/docs/queries/</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_open_data</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  source_url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  source_type <span class="op">=</span> <span class="st">"socrata"</span>,</span>
<span>  select <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  where <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  query <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  location <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  diag_ratio <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  asp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  token <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  from_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  crs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  clean_names <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_socrata_data</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  source_url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  select <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  where <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  query <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  location <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  diag_ratio <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  asp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span>,</span>
<span>  geometry <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  token <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  from_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>  crs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  clean_names <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data set identifier (known as a resource for Socrata) or a url
for an individual dataset. If data is set to "list" and a valid source_url
is provided, the function returns a list of all available resources. If data is a url, source_url must be null.</p></dd>


<dt>source_url</dt>
<dd><p>A data source url. For Socrata, this should the base url
for the open data portal.</p></dd>


<dt>source_type</dt>
<dd><p>Data source type; defaults to "socrata" which is currently
the only supported option.</p></dd>


<dt>select</dt>
<dd><p>SODA $select parameter. Set of columns to be returned, similar
to a SELECT in SQL. <a href="https://dev.socrata.com/docs/queries/select.html" class="external-link">https://dev.socrata.com/docs/queries/select.html</a></p></dd>


<dt>where</dt>
<dd><p>SODA $where parameter. Filters the rows to be returned, similar
to WHERE. <a href="https://dev.socrata.com/docs/queries/where.html" class="external-link">https://dev.socrata.com/docs/queries/where.html</a></p></dd>


<dt>query</dt>
<dd><p>SODA $query parameter. A full SoQL query string, all as one
parameter. <a href="https://dev.socrata.com/docs/queries/query.html" class="external-link">https://dev.socrata.com/docs/queries/query.html</a></p></dd>


<dt>dist</dt>
<dd><p>buffer distance in units. Optional.</p></dd>


<dt>diag_ratio</dt>
<dd><p>ratio of diagonal distance of area's bounding box used as
buffer distance. e.g. if the diagonal distance is 3000 meters and the
"diag_ratio = 0.1"  a 300 meter will be used. Ignored when <code>dist</code> is
provided.</p></dd>


<dt>unit</dt>
<dd><p>Units for buffer. Supported options include "meter", "foot",
"kilometer", and "mile", "nautical mile" Common abbreviations (e.g. "km"
instead of "kilometer") are also supported. Distance in units is converted
to units matching GDAL units for x; defaults to "meter"</p></dd>


<dt>asp</dt>
<dd><p>Aspect ratio of width to height as a numeric value (e.g. 0.33) or
character (e.g. "1:3"). If numeric, <code><a href="https://elipousson.github.io/sfext/reference/get_asp.html" class="external-link">get_asp()</a></code> returns the same value
without modification.</p></dd>


<dt>name, name_col</dt>
<dd><p>name of column in Socrata data resource with
location names (e.g. County) and name of location to return.</p></dd>


<dt>coords</dt>
<dd><p>Coordinate columns for input dataframe or output sf object (if
geometry is 'centroid' or 'point') Default: c("lon", "lat").</p></dd>


<dt>geometry</dt>
<dd><p>If <code>TRUE</code> and coords are provided, return a
<code>sf</code> object. Default <code>FALSE</code>.</p></dd>


<dt>token, type</dt>
<dd><p>Access token or API Key and token type (name used to store
token in .Renvironment). A token may be required to access data from
Socrata and other open data portals but can be stored as an environment
variable with <a href="set_access_token.html">set_access_token</a>.</p></dd>


<dt>from_crs</dt>
<dd><p>For <a href="https://elipousson.github.io/sfext/reference/sf_to_df.html" class="external-link">df_to_sf</a>, coordinate reference system used by
coordinates or well known text in data frame.</p></dd>


<dt>crs</dt>
<dd><p>Coordinate reference system of bounding box to return</p></dd>


<dt>clean_names</dt>
<dd><p>If <code>TRUE</code>, pass data frame to <a href="https://rdrr.io/pkg/janitor/man/clean_names.html" class="external-link">janitor::clean_names</a>; defaults to <code>TRUE</code>.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Get Q2 2020 vehicle crash data for Cecil County, Maryland</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">get_open_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>    source_url <span class="op">=</span> <span class="st">"https://opendata.maryland.gov"</span>,</span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="st">"65du-s3qu"</span>,</span></span>
<span class="r-in"><span>    where <span class="op">=</span> <span class="st">"(year = '2020') AND (quarter = 'Q2')"</span>,</span></span>
<span class="r-in"><span>    name_col <span class="op">=</span> <span class="st">"county_desc"</span>,</span></span>
<span class="r-in"><span>    name <span class="op">=</span> <span class="st">"Cecil"</span>,</span></span>
<span class="r-in"><span>    token <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MARYLAND_OPEN_DATA_API_KEY"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Eli Pousson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer></div>

  

  

  </body></html>

